{"version":3,"file":"vue.js","sources":["../src/complier/astParse.js","../src/complier/generate.js","../src/complier/index.js","../src/patch.js","../src/nextTick.js","../src/observe/dep.js","../src/observe/watcher.js","../src/lifecycle.js","../src/proxy/index.js","../src/observe.js","../src/defineReactive.js","../src/utils.js","../src/proxy/proxyArr.js","../src/observe/index.js","../src/init.js","../src/vdom/vnode.js","../src/vdom/index.js","../src/index.js"],"sourcesContent":["// 匹配id=\"app\"/id='app'/id=app\nconst attribute =\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\n// 匹配开始标签的起始部分，如：<div\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\n// 匹配开始标签的结束部分，如：>、/>\nconst startTagClose = /^\\s*(\\/?)>/\n// 匹配结束标签，如：</div>\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\n\nfunction parseHTMLToAST(html) {\n  let root = null, currentParent, stack = [];\n  while (html) {\n    let startTagIndex = html.indexOf('<');\n    if (startTagIndex === 0) {\n      let match;\n      // 如果为开始标签\n      if (match = html.match(startTagOpen)) {\n        advance(match[0]);\n        let attrs = parseStartTag(); // 获取属性值\n        start(match[1], attrs);\n      }\n\n      // 如果为结束标签\n      if (match = html.match(endTag)) {\n        end(match[1]);\n        advance(match[0]);\n      }\n    }\n    else {\n      // 为文本\n      let text = html.substring(0, startTagIndex);\n      chars(text);\n      advance(text);\n    }\n  }\n  return root;\n\n  function advance(text) {\n    html = html.substring(text.length);\n  }\n  \n  function start(tagName, attrs) {\n    console.log('---------开始---------');\n    console.log(tagName, attrs);\n    const element = createElement(tagName, 1, attrs);\n    !root && (root = element);\n    currentParent = element;\n    stack.push(element);\n  }\n  \n  function end(tagName) {\n    console.log('---------结束---------');\n    console.log(tagName);\n    const element = stack.pop(),\n      parent = stack[stack.length - 1];\n    // 遇到结束标签那么需要找该元素的父元素，如果stack没有说明其为根元素\n    if (parent) {\n      parent.children.push(element);\n    }\n  }\n  \n  function chars(text) {\n    text = text.trim();\n    // 如果文本节点不为空则加入，因为有时候为换行符等空白字符\n    if (text) {\n      console.log('---------文本---------');\n      console.log(text);\n      currentParent.children.push({\n        type: 3,\n        value: text.trim()\n      })\n    }\n  }\n  \n  function createElement(tag, type, attrs=[], children=[]) {\n    return {\n      tag,\n      type,\n      attrs,\n      children\n    }\n  }\n\n  function parseStartTag() {\n    let attrs, end, attrList = [];\n    /**\n     * 这里一定要先获取end，因为如果先获取attrs的话在匹配 > 或者 /> 的时候，\n     * 就会因为attrs没有而直接跳出while循环，导致end没有值，那么就不能在结束\n     * 循环后把开始标签的结束部分给删除掉了\n     */\n    while (!(end = html.match(startTagClose)) && (attrs = html.match(attribute))) {\n      advance(attrs[0]);\n      attrList.push({\n        name: attrs[1],\n        value: attrs[3] || attrs[4] || attrs[5]\n      })\n    }\n    end && advance(end[0]);\n    return attrList;\n  }\n}\n\nexport {\n  parseHTMLToAST\n}","const defautTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\nfunction genTextNode(text) {\n  console.log(\"text: \", text);\n  // 如果为纯文本则直接返回\n  if (!defautTagRE.test(text)) return `_v(${JSON.stringify(text)})`;\n  let match, index = 0, lastIndex = defautTagRE.lastIndex = 0;\n  const tokens = [];\n  // 如果为混合文本，先将每一部分存入tokens然后用+连接\n  while (match = defautTagRE.exec(text)) {\n    index = match.index;\n    if (index > lastIndex) {\n      tokens.push(JSON.stringify(text.substring(lastIndex, index)));\n    }\n    tokens.push(`_s(${match[1].trim()})`);\n    lastIndex = index + match[0].length;\n  }\n  if (lastIndex < text.length) {\n    tokens.push(JSON.stringify(text.substring(lastIndex)));\n  }\n  return `_v(${tokens.join(\"+\")})`;\n}\n\nfunction genChildren(children) {\n  // 防止产生多余的逗号，那么需要把子元素都收集起来再用逗号连接即可\n  let str = [];\n  children.forEach(item => {\n    if (item.type === 1) {\n      // 如果为元素节点就用generate函数产生一次\n      str.push(generate(item));\n    } else if (item.type === 3) {\n      // 如果为文本节点\n      str.push(genTextNode(item.value));\n    }\n  });\n  return str.join(',');\n}\n\nfunction genAtrrs(attrs) {\n  let obj = {};\n  attrs.forEach(item => {\n    if (item.name === 'style') {\n      /**\n       * 如果为style属性单独处理，将value按照:;分割，会形成数组，每两个为一组键值对，\n       * 所以按照两个一起添加即可\n       */\n      const temp = item.value.split(/[:;]/);\n      obj.style = {};\n      for (let i = 0, len = Math.floor(temp.length / 2); i < len; i++) {\n        obj.style[temp[i * 2].trim()] = temp[i * 2 + 1].trim();\n      }\n    } else {\n      obj[item.name] = item.value;\n    }\n  })\n  console.log(\"attrs: \", obj);\n  return JSON.stringify(obj);\n}\n\nfunction generate(obj) {\n  const children = genChildren(obj.children);\n  return `_c(\"${obj.tag}\",${obj.attrs.length ? genAtrrs(obj.attrs) : 'undefined'}${children ? `,${children}` : ''})`;\n}\n\nexport {\n  generate\n}","import { parseHTMLToAST } from './astParse.js';\nimport { generate } from './generate.js';\n\nfunction compileToRender(html) {\n  const ast = parseHTMLToAST(html);\n  console.log('AST树: ', ast, '\\n--------------------');\n  const code = generate(ast);\n  const render = new Function(`with(this){ return ${code} }`);\n  console.log('render函数: ', render, '\\n--------------------');\n  return render;\n}\n\nexport {\n  compileToRender\n}","function addAttr(dom, key, value) {\n  switch (key) {\n    case 'class':\n      dom.className = value;\n      break;\n    case 'style':\n      let str = '';\n      for (let key in value) str += `${key}:${value[key]};`\n      dom.style.cssText = str;\n      break;\n    default:\n      dom.setAttribute(key, value);\n      break;\n  }\n}\n\nfunction addAttrs(dom, attrs) {\n  for (let key in attrs) {\n    addAttr(dom, key, attrs[key]);\n  }\n}\n\nfunction createElement(vnode) {\n  const { tag, attrs, children, text } = vnode;\n  let dom = vnode.el = null;\n  if (tag) {\n    // 元素节点\n    dom = document.createElement(tag);\n    addAttrs(dom, attrs);\n    children.forEach(item =>\n      dom.appendChild(createElement(item)));\n  } else {\n    // 文本节点\n    dom = document.createTextNode(text)\n  }\n  return dom;\n}\n\nfunction patch(oldNode, vnode) {\n  const el = createElement(vnode),\n    parent = oldNode.parentNode;\n  console.log('真实DOM: ', el, '\\n--------------------');\n\n  parent.insertAdjacentElement('beforeend', el);\n  parent.removeChild(oldNode);\n  return el;\n}\n\nexport {\n  patch\n}","/**\n * Vue内部的nextTick原理，nextTick的执行不是异步任务，只是将多次任务存放到队列中\n * 一起维护和更新，不过执行队列中的所有任务确实是利用浏览器的eventloop机制，也就是\n * 异步执行的\n */\nlet callbackQueue = []; // 存放待执行的回调函数，可能是内部的或用户的\nlet waiting = false; // 等待同步代码执行完后再执行队列里的回调\n\nfunction nextTick(callback) {\n  callbackQueue.push(callback);\n  if (!waiting) {\n    timeFunc(flashCallbackQueue)\n    waiting = true;\n  }\n}\n\nfunction flashCallbackQueue() {\n  const callbackQueueCopy = callbackQueue.slice(0);\n  callbackQueue.length = 0;\n  waiting = false;\n  callbackQueueCopy.forEach(cb => cb());\n}\n\nfunction timeFunc(callback) {\n  /**\n   * 采用优雅降级处理：\n   * 1.优先采用Promise\n   * 2.如果没有就用MutationObserver\n   * 3.再没有用setImmediate\n   * 4.最后才使用setTimeout\n   */\n  if (Promise) {\n    Promise\n      .resolve()\n      .then(callback)\n  } else if (MutationObserver) {\n    // 这个方法需要观测一个DOM对象\n    const observer = new MutationObserver(callback);\n    const textNode = document.createTextNode('Origin Value');\n    observer.observe(textNode, {\n      characterData: true // 文本变化就执行callback\n    })\n    textNode.textContent = 'Updated Value';\n  } else if (setImmediate) {\n    setImmediate(callback);\n  } else if (setTimeout) {\n    setTimeout(callback);\n  }\n}\n\nexport default nextTick","// 收集依赖和通知watcher\nlet id = 0;\nfunction Dep(val) {\n  this.id = id++; // 每个dep的唯一标识符\n  this.val = val;\n  this.subscribe = []; // 存放含有这个变量的watcher\n}\n\nDep.target = null;\n\nDep.prototype.depend = function () {\n  // 首先询问watcher是否加过当前的dep\n  // Dep.target有可能不存在，因为如果为基本类型就直接被return返回了，返回值为undefined\n  if (Dep.target) {\n    Dep.target.addDep(this); \n  }\n}\n\nDep.prototype.addWatcher = function (watcher) {\n  // watcher加了当前dep后，dep把当前的watcher加进去\n  this.subscribe.push(watcher);\n}\n\nDep.prototype.notify = function () {\n  // 让subscribe里的每个watcher都进行更新\n  this.subscribe.forEach(watcher => watcher.update())\n}\n\nexport default Dep;","import nextTick from \"../nextTick.js\";\nimport Dep from \"./dep.js\";\n\n// 存储组件中的变量\nlet id = 0;\nlet queue = []; // 存放待更新的watcher队列\nlet watcherSet = new Set(); // 去重存放watcher的id\nlet waiting = false; // 防抖\n\nfunction Watcher(vm, fn) {\n  this.id = id++; // 每个watcher的唯一标识符\n  this.fn = fn;\n  this.deps = []; // 记录watcher中的dep，实现计算属性和清理工作要用到\n  this.depIds = new Set(); // 去重dep\n  this.mountPage(); // 初次渲染页面 \n}\n\nWatcher.prototype.mountPage = function () {\n  console.log('渲染页面: run...');\n  Dep.target = this;\n  this.fn();\n  Dep.target = null;\n}\n\nWatcher.prototype.update = function () {\n  // this.mountPage();\n  // 批量处理更新，多次设置合并成一次渲染\n  this.queueWatcher();\n}\n\nWatcher.prototype.addDep = function (dep) {\n  const id = dep.id;\n  // 如果watcher没有添加过当前的dep\n  if (!this.depIds.has(id)) {\n    this.deps.push(dep);\n    this.depIds.add(id);\n    dep.addWatcher(this);\n  }\n}\n\nWatcher.prototype.queueWatcher = function () {\n  const id = this.id;\n  if (!watcherSet.has(id)) {\n    queue.push(this);\n    watcherSet.add(id);\n    /**\n     * 如果改变了不同组件的变量，那么会有不同的watcher待更新，因此需要等同步代码都执行完了\n     * 一起更新，所以需要有waiting开关，使多次更新合并为一次更新，因为最后执行的时候所有的\n     * 更新任务都存放在queue中了\n     */\n    if (!waiting) {\n      nextTick(flashSchedulerQueue);\n      waiting = true;\n    }\n  }\n}\n\nfunction flashSchedulerQueue() {\n  // 让内部任务队列里的watcher进行更新操作并重置参数\n  let queueCopy = queue.slice(0);\n  queue.length = 0;\n  watcherSet.clear();\n  waiting = false;\n  queueCopy.forEach(watcher => watcher.mountPage());\n}\n\nexport default Watcher;","import { patch } from './patch.js';\nimport Watcher from './observe/watcher.js';\n\nfunction mountComponent(vm) {\n  const updateCompnent = () => vm._update(vm._render());\n  const watcher = new Watcher(vm, updateCompnent);\n  console.log('-------------\\n当前页面的watcher: ', watcher, '\\n-------------');\n}\n\nfunction lifecycleMixin(Vue) {\n  Vue.prototype._update = function (vnode) {\n    const vm = this, el = vm.$el;\n    // 在这里接受生成的虚拟DOM，然后转换为真实的DOM节点，更新当前$el节点的值\n    vm.$el = patch(el, vnode);\n  }\n}\n\nexport {\n  mountComponent,\n  lifecycleMixin\n}","function proxyData(vm) {\n  // 代理$data，能通过this.xxx直接访问属性\n  const $data = vm.$data;\n  for (let key in $data) {\n    Object.defineProperty(vm, key, {\n      get() {\n        return $data[key];\n      },\n      set(newVal) {\n        $data[key] = newVal;\n      }\n    })\n  }\n}\n\nexport {\n  proxyData\n}","import { Observe } from \"./observe/index.js\"\n\nfunction observe(value) {\n  // 不对基础类型进行观察\n  if (typeof value !== 'object' || value === null) return;\n  if (value.__ob__ instanceof Observe) {\n    // 如果观察过了就不观察\n    return value.__ob__;\n  }\n  // 没观察过该对象就进行观察\n  return new Observe(value);\n}\n\nexport {\n  observe\n}","import { observe } from \"./observe.js\";\nimport Dep from \"./observe/dep.js\";\n\nfunction defineReactive(data, key, value) {\n  let childOb = observe(value); // 递归观测并返回被观测对象或数组上的Observe实例\n  let dep = new Dep(value); // 通过闭包让每个基本属性都有一个dep实例\n  Object.defineProperty(data, key, {\n    get() {\n      console.log('数据劫持get操作', key, '->', value);\n      // 只收集在渲染过程中模板中使用的变量，如果在外获取变量，target的值为null，就不收集\n      if (Dep.target) {\n        dep.depend();\n        childOb && childOb.dep.depend(); // 让这个属性所在的数组或对象也进行依赖收集\n      }\n      return value;\n    },\n    set(newVal) {\n      console.log('数据劫持set操作', newVal, '<-', value);\n      // 如果没改变值那么直接返回\n      if (value === newVal) return;\n      // 观察更改的值，让其也变成响应式\n      observe(newVal);\n      value = newVal;\n      dep.notify(); // 如果属性更新了那么就更新视图\n    }\n  })\n}\n\nexport {\n  defineReactive\n}","function def(obj, key, value, enumerable) {\n  Object.defineProperty(obj, key, {\n    writable: true,\n    configurable: true,\n    value,\n    enumerable\n  }) \n}\n\nexport {\n  def\n}","import { def } from \"../utils.js\";\n\nconst METHODS = [\n  'push',\n  'pop',\n  'unshift',\n  'shift',\n  'sort',\n  'reverse',\n  'splice'\n];\n\nconst arrayPrototypeCopy = Array.prototype,\n  newMethods = Object.create(arrayPrototypeCopy);\n\nfor (let m of METHODS) {\n  def(newMethods, m, function () {\n    const args = Array.prototype.slice.call(arguments);\n    const res = arrayPrototypeCopy[m].apply(this, args);\n    const ob = this.__ob__;\n    console.log('监听数组的', m, '方法');\n    // 监听修改数组的操作，如果添加的元素中有对象也要监听\n    let addElement;\n    switch (m) {\n      case 'push':\n      case 'unshift':\n        addElement = args;\n        break;\n      case 'splice':\n        // 因为splice添加的元素得从第三个开始算\n        addElement = args.slice(2);\n        break;\n      default:\n        break;\n    }\n\n    // 如果有添加的元素就进行观察\n    addElement && ob.observeArr(addElement);\n    // 如果数组更新了那么就更新页面\n    ob.dep.notify();\n    return res;\n  }, false);\n}\n\nexport {\n  newMethods\n}","import { defineReactive } from '../defineReactive.js';\nimport { observe } from '../observe.js';\nimport { newMethods } from '../proxy/proxyArr.js';\nimport { def } from '../utils.js';\nimport Dep from './dep.js';\n\n// 观察者类，用于观测数据使其成为响应式数据\nfunction Observe(value) {\n  // 给每个对象下增加dep，因为能到这的只能是对象\n  this.dep = new Dep(value);\n  // 在对象上添加Observe实例，代表已经监听并变成不可枚举的，否则就会死循环\n  def(value, '__ob__', this, false);\n  \n  if (Array.isArray(value)) {\n    // 如果是数组，需要重写七个方法，且更改数组的原型链\n    value.__proto__ = newMethods;\n    // 观测数组中的每一项\n    this.observeArr(value);\n  } else {\n    // 观测对象\n    this.walk(value);\n  }\n}\n\nObserve.prototype.walk = function (data) {\n  for (let key in data) {\n    defineReactive(data, key, data[key]);\n  }\n}\n\nObserve.prototype.observeArr = function (data) {\n  for (let i = 0, len = data.length; i < len; i++) {\n    observe(data[i]);\n  }\n}\n\nexport {\n  Observe\n}","import { compileToRender } from './complier/index.js';\nimport { mountComponent } from './lifecycle.js';\nimport { proxyData } from './proxy/index.js';\nimport { Observe } from './observe/index.js';\nimport nextTick from './nextTick.js';\n\nfunction initMixin(Vue) {\n\n  function initState(vm) {\n    const options = vm.$options;\n    // 初始化data数据\n    options.data && initData(vm);\n  }\n  \n  function initData(vm) {\n    let data = vm.$options.data, type = typeof data;\n    // 如果data为函数那么就调用，并修改this指向，不修改指向GlobalThis，如果为对象就赋值给data\n    if (!(['object', 'function'].includes(type)) || data === null) {\n      throw new Error('data must be a object!');\n    }\n    vm.$data = data = (type === 'function' ? data.call(vm) : data);\n    proxyData(vm);\n    new Observe(vm.$data);\n  }\n\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    vm.$options = options;\n    vm.$data = options.data;\n    vm.$nextTick = nextTick;\n    // 初始化数据\n    initState(vm)\n\n    let el = vm.$options.el;\n    if (el) {\n      // 渲染页面\n      vm.$mount(el);\n    }\n  }\n\n  Vue.prototype.$mount = function (el) {\n    const vm = this,\n      options = vm.$options;\n    if (!options.render) {\n      // 获取模板，可能是options里的template也可能是DOM\n      let template = options.template;\n      el = document.querySelector(el);\n      vm.$el = el;\n      if (!template && el) {\n        template = el.outerHTML;\n      }\n      // 将模板编译为render函数\n      options.render = compileToRender(template);\n    }\n    // 渲染组件\n    mountComponent(vm);\n  }\n}\n\nexport {\n  initMixin\n}","function createElement(tag, attrs, ...children) {\n  return vnode(tag, attrs, children)\n}\n\nfunction createTextVode(text) {\n  return vnode(undefined, undefined, undefined, text);\n}\n\nfunction vnode(tag, attrs, children, text) {\n  return {\n    tag,\n    attrs,\n    children,\n    text\n  }\n}\n\nexport {\n  createElement,\n  createTextVode\n}","import { createElement, createTextVode } from './vnode.js';\n\nfunction renderMixin(Vue) {\n  // 元素节点\n  Vue.prototype._c = function() {\n    return createElement(...arguments);\n  }\n\n  // 文本节点\n  Vue.prototype._v = function(text) {\n    return createTextVode(text);\n  }\n\n  // 变量\n  Vue.prototype._s = function (value) {\n    if (value === null) return;\n    return typeof value === 'object' ? JSON.stringify(value) : value;\n  }\n\n  Vue.prototype._render = function () {\n    const vm = this,\n      render = vm.$options.render,\n      vnode = render.call(vm);\n    console.log(\"vnode: \", vnode, \"\\n--------------------\");\n    return vnode;\n  }\n}\n\nexport {\n  renderMixin\n}","import { initMixin } from './init.js';\nimport { lifecycleMixin } from './lifecycle.js';\nimport { renderMixin } from './vdom/index.js';\n\nfunction Vue(options) {\n  this._init(options);\n}\n\ninitMixin(Vue);\nlifecycleMixin(Vue);\nrenderMixin(Vue);\n\nexport default Vue;"],"names":["attribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseHTMLToAST","html","root","currentParent","stack","startTagIndex","indexOf","match","advance","attrs","parseStartTag","start","end","text","substring","chars","length","tagName","console","log","element","createElement","push","pop","parent","children","trim","type","value","tag","attrList","name","defautTagRE","genTextNode","test","JSON","stringify","index","lastIndex","tokens","exec","join","genChildren","str","forEach","item","generate","genAtrrs","obj","temp","split","style","i","len","Math","floor","compileToRender","ast","code","render","Function","addAttr","dom","key","className","cssText","setAttribute","addAttrs","vnode","el","document","appendChild","createTextNode","patch","oldNode","parentNode","insertAdjacentElement","removeChild","callbackQueue","waiting","nextTick","callback","timeFunc","flashCallbackQueue","callbackQueueCopy","slice","cb","Promise","resolve","then","MutationObserver","observer","textNode","observe","characterData","textContent","setImmediate","setTimeout","id","Dep","val","subscribe","target","prototype","depend","addDep","addWatcher","watcher","notify","update","queue","watcherSet","Set","Watcher","vm","fn","deps","depIds","mountPage","queueWatcher","dep","has","add","flashSchedulerQueue","queueCopy","clear","mountComponent","updateCompnent","_update","_render","lifecycleMixin","Vue","$el","proxyData","$data","Object","defineProperty","get","set","newVal","__ob__","Observe","defineReactive","data","childOb","def","enumerable","writable","configurable","METHODS","arrayPrototypeCopy","Array","newMethods","create","m","args","call","arguments","res","apply","ob","addElement","observeArr","isArray","__proto__","walk","initMixin","initState","options","$options","initData","includes","Error","_init","$nextTick","$mount","template","querySelector","outerHTML","createTextVode","undefined","renderMixin","_c","_v","_s"],"mappings":"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"}